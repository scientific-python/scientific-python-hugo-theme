{{ $page := . }}
<!-- Favicon -->
<link rel="icon" href="{{ "images/favicon.ico" | relURL }}" />

<!-- Theme CSS -->
{{ $cssFiles := (slice
                   "styles" "content" "news" "keyfeatures"
                   "tables" "videos" "posts"
                ) }}
{{- range $cssFiles -}}
{{- $sassFile := printf "sass/%s.scss" . -}}
{{- $targetFile := printf "css/scientific-python-hugo-theme/%s.css" . -}}
{{- $style := resources.Get $sassFile | resources.ExecuteAsTemplate $targetFile $page | resources.ToCSS -}}
<link rel="stylesheet" href="{{ $style.RelPermalink }}">
{{ end -}}

<!-- Custom CSS -->
<!-- All CSS files under assets/css are compiled (as templates) and parsed as SASS -->
{{ $cssDir := "assets/css" }}
{{ if (fileExists $cssDir) }}

{{- range (readDir $cssDir) -}}
{{- $fileName := printf "css/%s" .Name -}}
{{ if (or (strings.HasSuffix .Name ".css") (strings.HasSuffix .Name ".scss")) }}
{{- $targetFile := printf "css/user/%s" .Name -}}
{{- $custom_style := resources.Get $fileName | resources.ExecuteAsTemplate $targetFile $page | resources.ToCSS -}}
<link rel="stylesheet" href="{{ $custom_style.RelPermalink }}">
{{ end }}
{{ end -}}

{{ end }}
