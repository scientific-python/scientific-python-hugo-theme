{{ $arg := .Get 0 }}
{{ $data := .Inner | transform.Unmarshal }}

{{ with $data }}
<table>
  {{ range .format }}
  <col
    {{ range $key, $val := . }}
    {{ $key }}="{{ $val}}"
    {{ end }}
  >
  {{ end }}

  {{ range .headers }}
  <th>{{ . | markdownify }}</th>
  {{ end }}

  {{ range $row := .rows }}
  <tr>
    {{ range $col := .columns }}
      {{ if reflect.IsMap $col }}
      <td colspan="{{ $col.colspan }}" rowspan="{{ $col.rowspan }}">
        {{ $col.text | markdownify }}
      </td>
      {{ else }}
      <td>
        {{ . | markdownify }}
      </td>
      {{ end }}
    {{ end }}
  </tr>
  {{ end }}

</table>
{{ end }}
